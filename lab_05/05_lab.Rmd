---
title: "lab_05_answers"
author: "Cassie Peo"
date: "2024-02-22"
output: html_document
---
**Q1.** In your lab_05 folder, there is a csv called CDC_Life_Census_Tract_2010_2015.csv.  It contains all of the life expectancy data for the United States.

You are going to examine this data and learn the range of death rates in Baltimore and then in Maryland in general.

Do the following:
-  Load tidyverse and janitor
-  Load the data CDC_Life_Census_Tract_2010_2015.csv into a dataframe called us_death. 
Include the code to show the number of records. Clean the names using Janitor
-  Filter this according to Maryland into second table called md_death
-  Filter this according to Baltimore City into a third table called balt_death

**A1.**

```{r}
options(scipen=999)

library(tidyverse)

library(janitor)

```

```{r}

us_death <- read_csv("CDC_Life_Census_Tract_2010_2015.csv") %>% 
  as.data.frame()
us_death_with_totals = janitor::adorn_totals(us_death)

us_death <- janitor::clean_names(us_death)

```
```{r}

md_death <- us_death %>%
  filter(state == "Maryland")

```

```{r}

balt_death <- md_death %>%
  filter(county == "Baltimore city, MD")

```

**Q2.** 
For this question, load a modified dataset called balt_death_census.csv.

Call it balt_death2

This has the same information but with the Baltimore neighborhoods. 

Produce summary statistics showing the data distribution by quartile, median, mean, miniumum and maximum values on the life expectancy rate.

Show the neighborhoods with a life expectancy rate below the 1st quartile, arranged in ascending order. 


**A2.** 
```{r}
balt_death2 <- read_csv("balt_death_census.csv") %>% 
  as.data.frame()
```

```{r}
summary(balt_death2$life_expectancy)
```

```{r}

summary(balt_death2$life_expectancy)

lowest_life_exp <- balt_death2 %>%
 filter(life_expectancy < 69.58) %>%
  arrange(life_expectancy)

lowest_life_exp %>% 
  select(state, county, life_expectancy)

```


**Q3.** Use md_death, the Maryland life expectancy rates.
Produce summary statistics of the state of Maryland life expectancy rate. 
Produce a table with the 20 communities with the lowest life expectancy. 
Produce a table with the 20 communities with the highest life expectancy. 

Then use us_death, and determine the average life expectancy nationwide.

Then write 150-200 words on this document below your code that compares your findings of Baltimore, the state and nation. 

**A3.**

```{r}

summary(md_death$life_expectancy)

```
```{r}
top20_life_exp <- md_death %>%
  slice_max(life_expectancy, n = 20)

bottom20_life_exp <- md_death %>%
  slice_min(life_expectancy, n = 20)

```

```{r}
summary(us_death$life_expectancy)

# The average life expectancy nationwide is 78.31 years. The average life expectancy for Maryland is 78.7 years, which is very close to the nationwide average. However, the average life expectancy in Baltimore city is 73.04 years, which is almost a five year difference from both the state and nationwide averages. It is interesting that the state of Maryland's average life expectancy is very close to the nationwide average, both about 78 years, while Baltimore's average life expectancy is almost five years lower. If I were to write a story on this, I would investigate why the average life expectancy in Baltimore is less than the state average, and would want to investigate causes of death to see if that makes a difference. I would also want to investigate the average life expectancy in different neighborhoods in Baltimore and compare it to the median income to see if wealthier neighborhoods had a higher life expectancy. 

```

**Q4.**

Use balt_death. Use mutate and the case_when command.

Categorize all Baltimore City Census tracts as being above or below the city's average life expectancy rate. 

Then produce a table that summarizes the number of Census tracts above or below the average life expectancy rate. Write two sentences summarizing your findings.

Pro Tip: See this chapter section for a refresher on case_when: https://wellsdata.github.io/data_journalism_class/_book/r-mutating.html#a-more-powerful-use


```{r}
summary(balt_death$life_expectancy)
```
```{r}

life_exp_above_below <- balt_death %>%
 mutate(
   category = case_when(
     life_expectancy > 73.04 ~ "above",
     life_expectancy < 73.04 ~ "below",
   )
 )

life_exp_above_below %>% 
  select(census_tract_number, life_expectancy, category)

```

```{r}

life_exp_above <- life_exp_above_below %>% 
  select(census_tract_number, life_expectancy, category) %>%
   filter(category == "above")

# From this dataset, I found that the average life expectancy in Baltimore is 73.04 years. Out of the 200 census tracts in Baltimore city, 87 of them were above the average life expectancy, while the remaining 113 are below the average life expectancy in Baltimore city. 

```